# 分库分表

## 为什么需要分库分表

* 数据库无法承载,数据库的性能瓶颈
* 数据库性能足够好,就不需要分库分表

| 序号 | 操作       | 描述                                                         |
|----|----------|------------------------------------------------------------|
| 1  | 分库       | 按照业务划分,例如:订单库和商品库(从业务方向上划分)<br> 主从数据库                      |
| 2  | 分表(比较困难) | 水平拆分,特点,每个表都一样,例如:订单表拆分<br> 垂直拆分:一个多字段的表拆分成多个表,例如订单表和订单详情表 |

**垂直拆分**

* 订单表中包含详情表,详情使用json 的格式存储在订单表的一个字段中.
* 拆分成订单表和详情表就是分表(垂直拆分)

**水平拆分**

* 订单表中字段,一分为二,生成order_01和order_02,一个表有一半的字段,字段太多可以无限拆下去.

## 两个解决方案

| 序号 | 操作                              | 描述                                     | 链接                                       |
|----|---------------------------------|----------------------------------------|------------------------------------------|
| 1  | shardingsphere(之间教shardingjdbc) | 优势不需要运维成本,直接跟java打交道(小公司,无运维人员使用)      | [官网](https://shardingsphere.apache.org/) |
| 2  | mycat                           | 需要运维,和对mycat十分了解的情况 (有运维的DBA人员的可以选择这个) | [官网](http://www.mycat.org.cn/)           |


## 文档阅读

* 首页先在右边切换语言为中文,然后找到遗留,查看到所有的历史版本.

![img.png](img.png)

* 找到此次版本.

![img_1.png](img_1.png)

![img_2.png](img_2.png)

**分布式治理**

* 辅助管理数据库,如果主库挂了可以自动辅助切换到从库去.

**弹性伸缩**

* 做数据迁移的.

**数据加密**

* 对个人信息进行加密,不是账号密码

**影子库**

* 压测,测试人员使用的

**可插拔架构**

* 方便扩展,为某些功能提供了扩展.












